{% extends 'AppBundle::layout.html.twig' %}

{% block content %}

  <div class="row">
    <div class="col-sm-6">
      <div class="page-header">
        <h1>
          {{ 'dashboard.title_not_assoc'|trans }}
        </h1>
      </div>

      <ul>
        {% for member in lasfMembers if not member.user.associated %}
          <li>
            <a href="{{ path('app_user_user', {id: member.user.id}) }}">
              {{ member.user.memberName }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>

    <div class="col-sm-6">
      <div class="page-header">
        <h1>
          {{ 'dashboard.title_assoc'|trans }}
        </h1>
      </div>

      <ul>
        {% for member in lasfMembers if member.user.associated %}
          <li>
            <a href="{{ path('app_user_user', {id: member.user.id}) }}">
              {{ member.user.memberName }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>

  {% include 'AppBundle::flashes.html.twig' %}

  <div class="page-header">
    <div class="row">
      <a href="{{ path('app_dashboard_index') }}" class="col-md-6"><h1>{{ 'dashboard.driver_title'|trans }}</h1></a>
      <a href="{{ path('app_dashboard_judges') }}" class="col-md-6"><h1>{{ 'dashboard.judge_title'|trans }}</h1></a>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
    {{ form_start(form) }}
      <div class="input-group col-sm-6">
        {{ form_widget(form.q) }}
        <span class="input-group-btn">
          <button class="btn btn-default" type="submit">
            <span class="fa fa-search"></span>
          </button>
        </span>
      </div>
    {{ form_end(form) }}
      <br>
    </div>
    <br>
      {% set cols = 2 %}
      {% for licence in licences %}
          {% if loop.index0 % cols == 0 %}
              <div class="col-lg-12">
          {% endif %}
          {% include 'AppBundle:Dashboard:licence_tab.html.twig' with {licence: licence, user: licence.user} %}
          {% if (loop.index0 % cols == cols - 1 or loop.last) %}
              </div>
          {% endif %}
      {% else %}
          <div class="col-sm-12">
              {% if app.request.get('user_search')['q'] is defined %}
                  {{ 'dashboard.index.no_results'|trans }}
              {% else %}
                  {{ 'dashboard.index.no_licences'|trans }}
              {% endif %}
          </div>
      {% endfor %}
  </div>

  {% if licences.pagination.pageCount > 1 %}
    {{ pagination(licences) }}
  {% endif %}
{% endblock %}
