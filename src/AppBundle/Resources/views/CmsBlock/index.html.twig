{% extends 'AppBundle::layout.html.twig' %}

{% block content %}
  <div class="page-header">
    <h1>
      {{ 'cms_block.index.title'|trans }}
      <a href="{{ url('app_cmsblock_new') }}" class="btn btn-success pull-right"><i class="fa fa-plus"></i> {{ 'cms_block.index.new'|trans }}
      </a>
    </h1>
    <div class="clearfix"></div>
  </div>

  {% include 'AppBundle::flashes.html.twig' %}

  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title"><i class="fa fa-th-large"></i> {{ 'cms_block.index.title'|trans }}</h3>
    </div>
    <div class="rows-to-columns">
    <table class="table table-hover table-striped">
      <thead>
        <tr>
          <th>#</th>
          <th>{{ sorter_link(blocks, 't.alias', 'cms_block.label.alias'|trans) }}</th>
          <th>{{ sorter_link(blocks, 't.name', 'cms_block.label.name'|trans) }}</th>
          <th>{{ sorter_link(blocks, 't.updatedAt', 'cms_block.label.last_update'|trans) }}</th>
          <th></th>
        </tr>
        <tr role="row" class="filter">
          <td></td>
          <td>{{ filter_search(blocks, "t.alias") }}</td>
          <td>{{ filter_search(blocks, "t.name") }}</td>
          <td>{{ filter_search(blocks, "t.updatedAt") }}</td>
        </tr>
      </thead>
      <tbody>
        {% for block in blocks %}
          <tr>
            <td data-title="{{ '#'|trans }}" class="col-min">{{ block.id }}</td>
            <td data-title="{{ 'cms_block.label.alias'|trans }}">{{ block.alias }}</td>
            <td data-title="{{ 'cms_block.label.name'|trans }}">{{ block.name }}</td>
            <td data-title="{{ 'cms_block.label.last_update'|trans }}">{{ block.createdAt|localizeddate('short') }}</td>
            <td data-title="" class="col-min">
              {% set urlName = 'app_cmsblock_edit' %}
              {% if block.alias == constant('AppBundle\\Entity\\CmsBlock::DEFAULT_AGREEMENT') %}
                {% set urlName = 'app_cmsblock_modify' %}
              {% endif %}
              <a href="{{ url(urlName, {id: block.id}) }}" class="btn btn-xs btn-link" data-title="{{ 'title.edit'|trans }}" data-toggle="tooltip">
                <i class="fa fa-search"></i>
              </a>
              <a href="{{ url('app_cmsblock_delete', {id: block.id}) }}" class="btn btn-xs btn-link js-confirm" data-title="{{ 'title.delete'|trans }}" data-toggle="tooltip">
                <i class="fa fa-times"></i>
              </a>
              {% if urlName == 'app_cmsblock_modify' %}
                <a href="{{ url('app_cmsblock_restore', {id: block.id}) }}" class="btn btn-sm btn-primary">{{ 'cms_block.restore'|trans }}</a>
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    </div>
    <div class="panel-footer">
      {{ pagination(blocks) }}
    </div>
  </div>
{% endblock %}
